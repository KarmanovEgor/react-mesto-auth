{"ast":null,"code":"import{useContext,useEffect}from\"react\";import useFormValidation from\"../../utils/useFormValidation\";import PopupWithForm from\"../PopapWithForm/PopupWithForm\";import currentUserContext from\"../../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser;var currentUser=useContext(currentUserContext);var _useFormValidation=useFormValidation(),values=_useFormValidation.values,errors=_useFormValidation.errors,isInputValid=_useFormValidation.isInputValid,isValid=_useFormValidation.isValid,handleChange=_useFormValidation.handleChange,reset=_useFormValidation.reset,setInitialData=_useFormValidation.setInitialData;useEffect(function(){setInitialData(\"profilename\",currentUser.name);setInitialData(\"job\",currentUser.about);},[currentUser,setInitialData]);function resetOfClose(){onClose();reset({profilename:currentUser.name,job:currentUser.about});}// console.log(values)\nfunction handleSubmit(e){e.preventDefault();onUpdateUser({profilename:values.profilename,job:values.job},reset);}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"profile-edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",btnTitle:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",isOpen:isOpen,onClose:resetOfClose,isValid:isValid,onSubmit:handleSubmit,children:[\" \",/*#__PURE__*/_jsxs(\"fieldset\",{className:\"popup__elements\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__element \".concat(isInputValid.profilename===undefined||isInputValid.profilename?\"\":\"popup__element_invalid\"),type:\"text\",name:\"profilename\",id:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:2,maxLength:40,required:true,value:values.profilename,onChange:handleChange,isInputValid:isInputValid.profilename}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error popup__error_type_profilename\",children:errors.profilename}),/*#__PURE__*/_jsx(\"input\",{className:\"popup__element \".concat(isInputValid.job===undefined||isInputValid.job?\"\":\"popup__element_invalid\"),type:\"text\",name:\"job\",id:\"job\",placeholder:\"\\u0412\\u0438\\u0434 \\u0434\\u0435\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\",minLength:2,maxLength:200,required:true,value:values.job,onChange:handleChange,isInputValid:isInputValid.job}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error popup__error_type_job\",children:errors.job})]})]});}","map":{"version":3,"names":["useContext","useEffect","useFormValidation","PopupWithForm","currentUserContext","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","_ref","isOpen","onClose","onUpdateUser","currentUser","_useFormValidation","values","errors","isInputValid","isValid","handleChange","reset","setInitialData","name","about","resetOfClose","profilename","job","handleSubmit","e","preventDefault","title","btnTitle","onSubmit","children","className","concat","undefined","type","id","placeholder","minLength","maxLength","required","value","onChange"],"sources":["/Users/egorkarmanov/Desktop/yandex/mestoreact/mesto-react/src/components/EditProfilePopup/EditProfilePopup.jsx"],"sourcesContent":["import { useContext, useEffect } from \"react\";\nimport useFormValidation from \"../../utils/useFormValidation\";\nimport PopupWithForm from \"../PopapWithForm/PopupWithForm\";\nimport currentUserContext from \"../../contexts/CurrentUserContext\";\n\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const currentUser = useContext(currentUserContext);\n  const {\n    values,\n    errors,\n    isInputValid,\n    isValid,\n    handleChange,\n    reset,\n    setInitialData,\n  } = useFormValidation();\n  useEffect(() => {\n    setInitialData(\"profilename\", currentUser.name);\n    setInitialData(\"job\", currentUser.about);\n  }, [currentUser, setInitialData]);\n\n  function resetOfClose() {\n    onClose();\n    reset({ profilename: currentUser.name, job: currentUser.about });\n  }\n  // console.log(values)\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({ profilename: values.profilename, job: values.job }, reset);\n  }\n\n  return (\n    <PopupWithForm\n      name=\"profile-edit\"\n      title=\"Редактировать профиль\"\n      btnTitle=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={resetOfClose}\n      isValid={isValid}\n      onSubmit={handleSubmit}\n    >\n      {\" \"}\n      <fieldset className=\"popup__elements\">\n        <input\n          className={`popup__element ${\n            isInputValid.profilename === undefined || isInputValid.profilename\n              ? \"\"\n              : \"popup__element_invalid\"\n          }`}\n          type=\"text\"\n          name=\"profilename\"\n          id=\"name\"\n          placeholder=\"Имя\"\n          minLength={2}\n          maxLength={40}\n          required\n          value={values.profilename}\n          onChange={handleChange}\n          isInputValid={isInputValid.profilename}\n        />\n        <span className=\"popup__error popup__error_type_profilename\">\n          {errors.profilename}\n        </span>\n        <input\n          className={`popup__element ${\n            isInputValid.job === undefined || isInputValid.job\n              ? \"\"\n              : \"popup__element_invalid\"\n          }`}\n          type=\"text\"\n          name=\"job\"\n          id=\"job\"\n          placeholder=\"Вид деятельности\"\n          minLength={2}\n          maxLength={200}\n          required\n          value={values.job}\n          onChange={handleChange}\n          isInputValid={isInputValid.job}\n        />\n        <span className=\"popup__error popup__error_type_job\">{errors.job}</span>\n      </fieldset>\n    </PopupWithForm>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}